import{j as e,u as j,c as $,y as b,d as V,b as A,r as o,f as F,e as z,g as B,h as T,a as R,i as Q,p as W}from"./index-DKih_q2D.js";import{F as D,c as E,a as L,b as m,E as x,d as h,e as Z,f as H}from"./index.esm-DiFNqovO.js";const J=({isOpen:t,onClose:s,title:a,children:l})=>t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-black bg-opacity-50 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-xl mx-4 mt-10 sm:mt-20 p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-2 mb-4",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:a}),e.jsx("button",{onClick:s,"aria-label":"Close",className:"text-gray-500 hover:text-red-500 transition text-2xl font-bold",children:"×"})]}),e.jsx("div",{className:"max-h-[70vh] overflow-y-auto pr-1 custom-scrollbar",children:l})]})}):null,K=E().shape({title:h().required("Title is required"),audience:h().oneOf(["course","skill","public"]).required("Audience is required"),startDate:h().required("Start date is required"),endDate:h().required("End date is required"),timeLimit:Z().min(1,"Min 1 minute").required("Time limit is required"),visibility:h().oneOf(["public","courseOnly"]).required("Visibility is required"),skillTag:h().required("Skill Tag is required")}),Y={title:"",audience:"course",startDate:"",endDate:"",timeLimit:30,visibility:"public",skillTag:""},q=({onClose:t,initialData:s,isEditing:a})=>{console.log("initialData",s);const l=j(),d=s?{title:s.title||"",audience:s.audience||"course",startDate:s.startDate?.slice(0,16)||"",endDate:s.endDate?.slice(0,16)||"",timeLimit:s.timeLimit||30,visibility:s.visibility||"public",skillTag:s.skillTag||""}:Y,r=async i=>{try{a&&s?._id?(await l($({id:s._id,payload:i})).unwrap(),console.log("Test updated successfully"),b.success("Test updated successfully"),t()):(await l(V(i)).unwrap(),console.log("Test created successfully"),b.success("Test created successfully"))}catch(c){console.error("Error while submitting test:",c)}};return e.jsxs("div",{className:"max-w-3xl mx-auto bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:a?"✏️ Edit Test Series":"➕ Create New Test Series"}),e.jsx(D,{initialValues:d,validationSchema:K,onSubmit:r,enableReinitialize:!0,children:()=>e.jsxs(L,{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Test Title"}),e.jsx(m,{name:"title",className:"w-full mt-1 p-2 border rounded"}),e.jsx(x,{name:"title",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Target Audience"}),e.jsx("div",{className:"flex gap-4 mt-1",children:["course","skill","public"].map(i=>e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx(m,{type:"radio",name:"audience",value:i}),i.charAt(0).toUpperCase()+i.slice(1)]},i))}),e.jsx(x,{name:"audience",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Start Date & Time"}),e.jsx(m,{name:"startDate",type:"datetime-local",className:"w-full mt-1 p-2 border rounded"}),e.jsx(x,{name:"startDate",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"End Date & Time"}),e.jsx(m,{name:"endDate",type:"datetime-local",className:"w-full mt-1 p-2 border rounded"}),e.jsx(x,{name:"endDate",component:"div",className:"text-red-500 text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Time Limit (in minutes)"}),e.jsx(m,{name:"timeLimit",type:"number",className:"w-full mt-1 p-2 border rounded"}),e.jsx(x,{name:"timeLimit",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Visibility"}),e.jsxs("div",{className:"flex gap-4 mt-1",children:[e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx(m,{type:"radio",name:"visibility",value:"public"}),"Public"]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx(m,{type:"radio",name:"visibility",value:"courseOnly"}),"Course Only"]})]}),e.jsx(x,{name:"visibility",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Skill Tag"}),e.jsx(m,{name:"skillTag",placeholder:"e.g. Advanced JavaScript",className:"w-full mt-1 p-2 border rounded"}),e.jsx(x,{name:"skillTag",component:"div",className:"text-red-500 text-sm"})]}),e.jsx("div",{className:"pt-4 flex justify-end",children:e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:a?"Update Test Series":"Create Test Series"})})]})})]})},G=({isOpen:t,title:s="Confirm Action",message:a,onConfirm:l,onCancel:d})=>t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-xl w-full max-w-sm mx-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:s}),e.jsx("p",{className:"text-gray-700 mb-6",children:a}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:d,className:"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400 text-sm",children:"Cancel"}),e.jsx("button",{onClick:l,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 text-sm",children:"Yes, Delete"})]})]})}):null,S=()=>{const t=j(),{items:s,loading:a,error:l}=A(n=>n.testSeries),[d,r]=o.useState(s||[]),[i,c]=o.useState(!1),[u,p]=o.useState(null),[g,N]=o.useState(!1),[O,y]=o.useState(!1),[v,w]=o.useState(null),I=n=>{w(n),y(!0)},M=async()=>{if(v)try{await t(z(v)).unwrap(),r(n=>n.filter(U=>U._id!==v)),await k()}catch(n){console.error("Delete failed:",n)}finally{y(!1),w(null)}},k=async()=>{try{const n=await t(F()).unwrap();r(n)}catch(n){console.error("Error fetching test series:",n)}};o.useEffect(()=>{k()},[t]);const P=n=>{p(n),N(!0),c(!0)};return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"📋 Manage Test Series"}),a?e.jsx("p",{className:"text-gray-500",children:"Loading test series..."}):l?e.jsxs("p",{className:"text-red-500",children:["Error: ",l]}):d.length===0?e.jsx("p",{className:"text-gray-500",children:"No test series found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-gray-50 border rounded-lg shadow text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left text-gray-600",children:[e.jsx("th",{className:"p-3",children:"Title"}),e.jsx("th",{className:"p-3",children:"Audience"}),e.jsx("th",{className:"p-3",children:"Skill"}),e.jsx("th",{className:"p-3",children:"Time Limit"}),e.jsx("th",{className:"p-3",children:"Start"}),e.jsx("th",{className:"p-3",children:"End"}),e.jsx("th",{className:"p-3",children:"Actions"})]})}),e.jsx("tbody",{children:d.map(n=>e.jsxs("tr",{className:"border-t hover:bg-gray-100",children:[e.jsx("td",{className:"p-3",children:n.title}),e.jsx("td",{className:"p-3 capitalize",children:n.audience}),e.jsx("td",{className:"p-3",children:n.skillTag||"-"}),e.jsxs("td",{className:"p-3",children:[n.timeLimit," min"]}),e.jsx("td",{className:"p-3",children:new Date(n.startDate).toLocaleString()}),e.jsx("td",{className:"p-3",children:new Date(n.endDate).toLocaleString()}),e.jsxs("td",{className:"p-3 flex gap-2",children:[e.jsxs("button",{onClick:()=>P(n),className:"flex items-center gap-1 bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md text-xs shadow",children:["✏️ ",e.jsx("span",{children:"Edit"})]}),e.jsxs("button",{onClick:()=>I(n._id),className:"flex items-center gap-1 bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-md text-xs shadow",children:["🗑️ ",e.jsx("span",{children:"Delete"})]})]})]},n._id))})]})}),e.jsx(J,{isOpen:i,onClose:()=>{c(!1),p(null),N(!1)},title:g?"Edit Test Series":"Create New Test",children:e.jsx(q,{onClose:()=>{c(!1),p(null),N(!1),k()},initialData:u,isEditing:g})}),e.jsx(G,{isOpen:O,title:"Delete Test Series",message:"Are you sure you want to delete this test series? This action cannot be undone.",onConfirm:M,onCancel:()=>{y(!1),w(null)}})]})};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ee=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,a,l)=>l?l.toUpperCase():a.toLowerCase()),C=t=>{const s=ee(t);return s.charAt(0).toUpperCase()+s.slice(1)},_=(...t)=>t.filter((s,a,l)=>!!s&&s.trim()!==""&&l.indexOf(s)===a).join(" ").trim(),se=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var te={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=o.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:d="",children:r,iconNode:i,...c},u)=>o.createElement("svg",{ref:u,...te,width:s,height:s,stroke:t,strokeWidth:l?Number(a)*24/Number(s):a,className:_("lucide",d),...!r&&!se(c)&&{"aria-hidden":"true"},...c},[...i.map(([p,g])=>o.createElement(p,g)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=(t,s)=>{const a=o.forwardRef(({className:l,...d},r)=>o.createElement(ae,{ref:r,iconNode:s,className:_(`lucide-${X(C(t))}`,`lucide-${t}`,l),...d}));return a.displayName=C(t),a};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],re=f("award",le);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],ne=f("chart-no-axes-column",ie);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],de=f("trending-up",ce);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],me=f("users",oe),xe=()=>{const t=j(),{participants:s,averageScore:a,topPerformers:l,scoreDistribution:d,loading:r,error:i}=A(c=>c.analytics);return o.useEffect(()=>{t(B())},[t]),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6 flex items-center gap-2",children:"📊 Analytics Dashboard"}),r?e.jsx("p",{className:"text-gray-600",children:"Loading analytics..."}):i?e.jsxs("p",{className:"text-red-500",children:["Error: ",i]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg shadow hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx(me,{className:"text-blue-600",size:28}),e.jsx("h3",{className:"text-lg font-bold",children:"Total Participants"})]}),e.jsx("p",{className:"text-gray-800 text-xl font-semibold",children:s})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg shadow hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx(de,{className:"text-green-600",size:28}),e.jsx("h3",{className:"text-lg font-bold",children:"Average Score"})]}),e.jsx("p",{className:"text-gray-800 text-xl font-semibold",children:a})]}),e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg shadow hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx(re,{className:"text-yellow-600",size:28}),e.jsx("h3",{className:"text-lg font-bold",children:"Top 10 Performers"})]}),e.jsx("ul",{className:"list-decimal list-inside text-gray-700",children:l?.slice(0,10).map((c,u)=>e.jsxs("li",{children:["Score: ",c.score]},u))})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg shadow hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx(ne,{className:"text-purple-600",size:28}),e.jsx("h3",{className:"text-lg font-bold",children:"Score Distribution"})]}),e.jsx("ul",{className:"text-gray-700 text-sm max-h-48 overflow-y-auto",children:d?.map((c,u)=>e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:c.range}),e.jsx("span",{children:c.count})]},u))})]})]})]})},ue=()=>{const t=j(),[s]=o.useState([]),a={testId:"",file:null},l=E({file:H().required("File is required").test("fileFormat","Only CSV or Excel files allowed",r=>r?["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(r.type):!1)}),d=async(r,{resetForm:i})=>{try{if(!r.file)return;const c=await t(T({testId:r.testId,file:r.file}));T.fulfilled.match(c)?(b.success("Questions uploaded successfully!"),i()):b.error("Upload failed. Try again.")}catch(c){console.error(c),b.error("Server error. Please try again later.")}};return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"📤 Bulk Upload Questions"}),e.jsx(D,{initialValues:a,validationSchema:l,onSubmit:d,children:({setFieldValue:r})=>e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Select Test Series"}),e.jsxs(m,{as:"select",name:"testId",className:"w-full border border-gray-300 rounded p-2",children:[e.jsx("option",{value:"",children:"-- Choose Test --"}),s.map(i=>e.jsx("option",{value:i._id,children:i.title},i._id))]}),e.jsx(x,{name:"testId",component:"div",className:"text-red-500 text-sm mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Upload CSV or Excel File"}),e.jsx("input",{type:"file",name:"file",accept:".csv,.xlsx",className:"w-full border border-gray-300 rounded p-2",onChange:i=>{const c=i.currentTarget.files?.[0]??null;r("file",c)}}),e.jsx(x,{name:"file",component:"div",className:"text-red-500 text-sm mt-1"})]}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700",children:"Upload File"})]})})]})},be=()=>{const[t,s]=o.useState("manage"),a=j(),l=R(),d=()=>{a(Q()),l("/"),W.purge()},r=()=>{switch(t){case"manage":return e.jsx(S,{});case"create":return e.jsx(q,{onClose:()=>{}});case"analytics":return e.jsx(xe,{});case"upload":return e.jsx(ue,{});default:return e.jsx(S,{})}};return e.jsx("div",{className:"min-h-screen bg-cyan-100 p-4",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"🧑‍🏫 Admin Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Welcome, Praveen (instructor)"})]}),e.jsx("button",{onClick:d,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md transition",children:"Logout"})]}),e.jsxs("div",{className:"flex",children:[e.jsxs("aside",{className:"w-64 bg-slate-800 text-white rounded-lg p-4 mr-6",children:[e.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Admin Panel"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsx("li",{className:"cursor-pointer hover:text-cyan-300",onClick:()=>s("manage"),children:"📋 Manage Test Series"}),e.jsx("li",{className:"cursor-pointer hover:text-cyan-300",onClick:()=>s("create"),children:"➕ Create New Test"}),e.jsx("li",{className:"cursor-pointer hover:text-cyan-300",onClick:()=>s("analytics"),children:"📊 Analytics Dashboard"}),e.jsx("li",{className:"cursor-pointer hover:text-cyan-300",onClick:()=>s("upload"),children:"📤 Bulk Upload"})]})]}),e.jsx("div",{className:"flex-grow",children:r()})]})]})})};export{be as default};
