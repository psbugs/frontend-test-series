import{j as e,u as b,c as P,y as p,d as U,b as C,r as o,f as V,e as z,g as F,h as S,a as $,i as B,p as Q}from"./index-D-OPdEsm.js";import{c as j,F as D,a as A,b as E,d as m,E as x,e as h,f as R,g as H}from"./createLucideIcon-CKPv8PuH.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],W=j("award",J);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],G=j("chart-no-axes-column",Y);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],X=j("trending-up",K);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ee=j("users",Z),se=({isOpen:r,onClose:s,title:n,children:c})=>r?e.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-black bg-opacity-50 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-xl mx-4 mt-10 sm:mt-20 p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-2 mb-4",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:n}),e.jsx("button",{onClick:s,"aria-label":"Close",className:"text-gray-500 hover:text-red-500 transition text-2xl font-bold",children:"Ã—"})]}),e.jsx("div",{className:"max-h-[70vh] overflow-y-auto pr-1 custom-scrollbar",children:c})]})}):null,te=A().shape({title:h().required("Title is required"),audience:h().oneOf(["course","skill","public"]).required("Audience is required"),startDate:h().required("Start date is required"),endDate:h().required("End date is required"),timeLimit:R().min(1,"Min 1 minute").required("Time limit is required"),visibility:h().oneOf(["public","courseOnly"]).required("Visibility is required"),skillTag:h().required("Skill Tag is required")}),le={title:"",audience:"course",startDate:"",endDate:"",timeLimit:30,visibility:"public",skillTag:""},q=({onClose:r,initialData:s,isEditing:n})=>{const c=b(),d=s?{title:s.title||"",audience:s.audience||"course",startDate:s.startDate?.slice(0,16)||"",endDate:s.endDate?.slice(0,16)||"",timeLimit:s.timeLimit||30,visibility:s.visibility||"public",skillTag:s.skillTag||""}:le,i=async l=>{try{n&&s?._id?(await c(P({id:s._id,payload:l})).unwrap(),p.success("Test updated successfully"),r()):(await c(U(l)).unwrap(),p.success("Test created successfully"))}catch(a){console.error("Error while submitting test:",a)}};return e.jsxs("div",{className:"max-w-3xl mx-auto bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:n?"âœï¸ Edit Test Series":"âž• Create New Test Series"}),e.jsx(D,{initialValues:d,validationSchema:te,onSubmit:i,enableReinitialize:!0,children:()=>e.jsxs(E,{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Test Title"}),e.jsx(m,{name:"title",className:"w-full mt-1 p-2 border rounded"}),e.jsx(x,{name:"title",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Target Audience"}),e.jsx("div",{className:"flex gap-4 mt-1",children:["course","skill","public"].map(l=>e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx(m,{type:"radio",name:"audience",value:l}),l.charAt(0).toUpperCase()+l.slice(1)]},l))}),e.jsx(x,{name:"audience",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Start Date & Time"}),e.jsx(m,{name:"startDate",type:"datetime-local",className:"w-full mt-1 p-2 border rounded"}),e.jsx(x,{name:"startDate",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"End Date & Time"}),e.jsx(m,{name:"endDate",type:"datetime-local",className:"w-full mt-1 p-2 border rounded"}),e.jsx(x,{name:"endDate",component:"div",className:"text-red-500 text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Time Limit (in minutes)"}),e.jsx(m,{name:"timeLimit",type:"number",className:"w-full mt-1 p-2 border rounded"}),e.jsx(x,{name:"timeLimit",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Visibility"}),e.jsxs("div",{className:"flex gap-4 mt-1",children:[e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx(m,{type:"radio",name:"visibility",value:"public"}),"Public"]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx(m,{type:"radio",name:"visibility",value:"courseOnly"}),"Course Only"]})]}),e.jsx(x,{name:"visibility",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Skill Tag"}),e.jsx(m,{name:"skillTag",placeholder:"e.g. Advanced JavaScript",className:"w-full mt-1 p-2 border rounded"}),e.jsx(x,{name:"skillTag",component:"div",className:"text-red-500 text-sm"})]}),e.jsx("div",{className:"pt-4 flex justify-end",children:e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:n?"Update Test Series":"Create Test Series"})})]})})]})},ae=({isOpen:r,title:s="Confirm Action",message:n,onConfirm:c,onCancel:d})=>r?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-xl w-full max-w-sm mx-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:s}),e.jsx("p",{className:"text-gray-700 mb-6",children:n}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:d,className:"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400 text-sm",children:"Cancel"}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 text-sm",children:"Yes, Delete"})]})]})}):null,k=()=>{const r=b(),{items:s,loading:n,error:c}=C(t=>t.testSeries),[d,i]=o.useState(s||[]),[l,a]=o.useState(!1),[u,g]=o.useState(null),[T,f]=o.useState(!1),[L,N]=o.useState(!1),[y,v]=o.useState(null),_=t=>{v(t),N(!0)},M=async()=>{if(y)try{await r(z(y)).unwrap(),i(t=>t.filter(I=>I._id!==y)),await w()}catch(t){console.error("Delete failed:",t)}finally{N(!1),v(null)}},w=async()=>{try{const t=await r(V()).unwrap();i(t)}catch(t){console.error("Error fetching test series:",t)}};o.useEffect(()=>{w()},[r]);const O=t=>{g(t),f(!0),a(!0)};return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"ðŸ“‹ Manage Test Series"}),n?e.jsx("p",{className:"text-gray-500",children:"Loading test series..."}):c?e.jsxs("p",{className:"text-red-500",children:["Error: ",c]}):d.length===0?e.jsx("p",{className:"text-gray-500",children:"No test series found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-gray-50 border rounded-lg shadow text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left text-gray-600",children:[e.jsx("th",{className:"p-3",children:"Title"}),e.jsx("th",{className:"p-3",children:"Audience"}),e.jsx("th",{className:"p-3",children:"Skill"}),e.jsx("th",{className:"p-3",children:"Time Limit"}),e.jsx("th",{className:"p-3",children:"Start"}),e.jsx("th",{className:"p-3",children:"End"}),e.jsx("th",{className:"p-3",children:"Actions"})]})}),e.jsx("tbody",{children:d.map(t=>e.jsxs("tr",{className:"border-t hover:bg-gray-100",children:[e.jsx("td",{className:"p-3",children:t.title}),e.jsx("td",{className:"p-3 capitalize",children:t.audience}),e.jsx("td",{className:"p-3",children:t.skillTag||"-"}),e.jsxs("td",{className:"p-3",children:[t.timeLimit," min"]}),e.jsx("td",{className:"p-3",children:new Date(t.startDate).toLocaleString()}),e.jsx("td",{className:"p-3",children:new Date(t.endDate).toLocaleString()}),e.jsxs("td",{className:"p-3 flex gap-2",children:[e.jsxs("button",{onClick:()=>O(t),className:"flex items-center gap-1 bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md text-xs shadow",children:["âœï¸ ",e.jsx("span",{children:"Edit"})]}),e.jsxs("button",{onClick:()=>_(t._id),className:"flex items-center gap-1 bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-md text-xs shadow",children:["ðŸ—‘ï¸ ",e.jsx("span",{children:"Delete"})]})]})]},t._id))})]})}),e.jsx(se,{isOpen:l,onClose:()=>{a(!1),g(null),f(!1)},title:T?"Edit Test Series":"Create New Test",children:e.jsx(q,{onClose:()=>{a(!1),g(null),f(!1),w()},initialData:u,isEditing:T})}),e.jsx(ae,{isOpen:L,title:"Delete Test Series",message:"Are you sure you want to delete this test series? This action cannot be undone.",onConfirm:M,onCancel:()=>{N(!1),v(null)}})]})},ie=()=>{const r=b(),{participants:s,averageScore:n,topPerformers:c,scoreDistribution:d,loading:i,error:l}=C(a=>a.analytics);return o.useEffect(()=>{r(F())},[r]),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6 flex items-center gap-2",children:"ðŸ“Š Analytics Dashboard"}),i?e.jsx("p",{className:"text-gray-600",children:"Loading analytics..."}):l?e.jsxs("p",{className:"text-red-500",children:["Error: ",l]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg shadow hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx(ee,{className:"text-blue-600",size:28}),e.jsx("h3",{className:"text-lg font-bold",children:"Total Participants"})]}),e.jsx("p",{className:"text-gray-800 text-xl font-semibold",children:s})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg shadow hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx(X,{className:"text-green-600",size:28}),e.jsx("h3",{className:"text-lg font-bold",children:"Average Score"})]}),e.jsx("p",{className:"text-gray-800 text-xl font-semibold",children:n})]}),e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg shadow hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx(W,{className:"text-yellow-600",size:28}),e.jsx("h3",{className:"text-lg font-bold",children:"Top 10 Performers"})]}),e.jsx("ul",{className:"list-decimal list-inside text-gray-700",children:c?.slice(0,10).map((a,u)=>e.jsxs("li",{children:["Score: ",a.score]},u))})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg shadow hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx(G,{className:"text-purple-600",size:28}),e.jsx("h3",{className:"text-lg font-bold",children:"Score Distribution"})]}),e.jsx("ul",{className:"text-gray-700 text-sm max-h-48 overflow-y-auto",children:d?.map((a,u)=>e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:a.range}),e.jsx("span",{children:a.count})]},u))})]})]})]})},re=()=>{const r=b(),[s]=o.useState([]),n={testId:"",file:null},c=A({file:H().required("File is required").test("fileFormat","Only CSV or Excel files allowed",i=>i?["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(i.type):!1)}),d=async(i,{resetForm:l})=>{try{if(!i.file)return;const a=await r(S({testId:i.testId,file:i.file}));S.fulfilled.match(a)?(p.success("Questions uploaded successfully!"),l()):p.error("Upload failed. Try again.")}catch(a){console.error(a),p.error("Server error. Please try again later.")}};return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"ðŸ“¤ Bulk Upload Questions"}),e.jsx(D,{initialValues:n,validationSchema:c,onSubmit:d,children:({setFieldValue:i})=>e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Select Test Series"}),e.jsxs(m,{as:"select",name:"testId",className:"w-full border border-gray-300 rounded p-2",children:[e.jsx("option",{value:"",children:"-- Choose Test --"}),s.map(l=>e.jsx("option",{value:l._id,children:l.title},l._id))]}),e.jsx(x,{name:"testId",component:"div",className:"text-red-500 text-sm mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Upload CSV or Excel File"}),e.jsx("input",{type:"file",name:"file",accept:".csv,.xlsx",className:"w-full border border-gray-300 rounded p-2",onChange:l=>{const a=l.currentTarget.files?.[0]??null;i("file",a)}}),e.jsx(x,{name:"file",component:"div",className:"text-red-500 text-sm mt-1"})]}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700",children:"Upload File"})]})})]})},de=()=>{const[r,s]=o.useState("manage"),n=b(),c=$(),d=()=>{n(B()),c("/"),Q.purge()},i=()=>{switch(r){case"manage":return e.jsx(k,{});case"create":return e.jsx(q,{onClose:()=>{}});case"analytics":return e.jsx(ie,{});case"upload":return e.jsx(re,{});default:return e.jsx(k,{})}};return e.jsx("div",{className:"min-h-screen bg-cyan-100 p-4",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"ðŸ§‘â€ðŸ« Admin Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Welcome, Praveen (instructor)"})]}),e.jsx("button",{onClick:d,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md transition",children:"Logout"})]}),e.jsxs("div",{className:"flex",children:[e.jsxs("aside",{className:"w-64 bg-slate-800 text-white rounded-lg p-4 mr-6",children:[e.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Admin Panel"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsx("li",{className:"cursor-pointer hover:text-cyan-300",onClick:()=>s("manage"),children:"ðŸ“‹ Manage Test Series"}),e.jsx("li",{className:"cursor-pointer hover:text-cyan-300",onClick:()=>s("create"),children:"âž• Create New Test"}),e.jsx("li",{className:"cursor-pointer hover:text-cyan-300",onClick:()=>s("analytics"),children:"ðŸ“Š Analytics Dashboard"}),e.jsx("li",{className:"cursor-pointer hover:text-cyan-300",onClick:()=>s("upload"),children:"ðŸ“¤ Bulk Upload"})]})]}),e.jsx("div",{className:"flex-grow",children:i()})]})]})})};export{de as default};
